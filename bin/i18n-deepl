#!/usr/bin/env node

const { program } = require('commander');
const { translateTexts, getSupportedLanguages } = require('src/i18n-deepl.js');

program
  .command('languages')
  .description('List supported languages')
  .action(async () => {
    try {
      const languages = await getSupportedLanguages();
      console.log('Supported Languages:');
      languages.forEach(lang => console.log(`${lang.language} - ${lang.name}`));
    } catch (error) {
      console.error('Error fetching supported languages:', error);
    }
  });

program
  .command('translate <targetLang> [texts...]')
  .description('Translate texts to the target language')
  .action(async (targetLang, texts) => {
    if (!texts.length) {
      console.error('Please provide texts to translate.');
      process.exit(1);
    }

    try {
      const translations = await translateTexts(texts, targetLang);
      translations.forEach((translation, index) => {
        console.log(`Original: ${texts[index]}`);
        console.log(`Translated: ${translation}`);
      });
    } catch (error) {
      console.error('Error translating texts:', error);
    }
  });

program.parse(process.argv);